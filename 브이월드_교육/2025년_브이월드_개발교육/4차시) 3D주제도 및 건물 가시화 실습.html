<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='UTF-8'>
    <script type='text/javascript' src='https://map.vworld.kr/js/webglMapInit.js.do?version=3.0&apiKey=E5B1657B-9B6F-3A4B-91EF-98512BE931A1'></script>
</head>
<body>

    <div id="popup" style="display: none; position: absolute; background: white; padding: 10px; border: 1px solid black;">
        <p id="popup-content"></p>
    </div>


    <div id='map' style='width: 100%; height: 100vh;'></div>


    <script type='text/javascript'>
        var map;
        var options = {
            mapId: 'map', // 지도맵 컨테이너 아이디
            initPosition: new vw.CameraPosition(
                new vw.CoordZ(127.01923256131714, 37.03564822859657, 1500),
                new vw.Direction(0, -90, 0)
            ), // 초기 위치
            logo: true, // 하단 로고 설정. true:표출, false:미표출
            navigation: true // 오른쪽 상단 네비게이션 설정. true:표출, false:미표출
        };

        map = new vw.Map();
        map.setOption(options);
        map.start(); // 지도 생성


        const viewer = ws3d.viewer;

        vw.ws3dInitCallBack = function () { //3D지도가 로드된 후 실행되는 함수


            map.getElementById('facility_build').hide();
            /**
             * kml 파일 추가하는 방법
             */
            /*
            var kmlUrl = './토지이용계획도.kml';
            var kmlOptions = {
                camera: viewer.scene.camera,
                canvas: viewer.scene.canvas,
                clampToGround: true
            };
            Cesium.KmlDataSource.load(kmlUrl, kmlOptions).then(function(dataSource) {
                viewer.dataSources.add(dataSource);
                viewer.flyTo(dataSource);
            });
            */


            /**
             * 3D모델을 추가하는 방법 step 1
             */
            /*
            var modelEntity = viewer.entities.add({
                name : '아파트',
                position : Cesium.Cartesian3.fromDegrees(127.01923256131714, 37.03564822859657), // 좌표는 지오코더API 등을 통해 얻어온 좌표를 사용하면 됩니다.
                model : {
                    uri : './아파트.glb',
                    scale : 1.0
                }
            });
            viewer.zoomTo(modelEntity);
            */

            /**
             * 3D모델 반복문(for)로 추가하는 방법 step 2
             */
            /*
            local = [
                [127.0183562336405, 37.03524812928357],
                [127.0193888841112, 37.035849779909654],
                [127.02031424622122, 37.03647711872429],
                [127.01912602762772, 37.03456082860656],
                [127.0200808940369, 37.035288810436484],
                [127.02108404020844, 37.035826227839195]
            ]

            for (var i = 0; i < local.length; i++) {
                var modelEntity = viewer.entities.add({
                    name : '아파트 '+[i],
                    description : '아파트 '+[i]+' 입니다.',
                    position : Cesium.Cartesian3.fromDegrees(local[i][0], local[i][1]),
                    model : {
                        uri : './아파트.glb',
                        scale : 1.0
                    }
                });
                viewer.zoomTo(modelEntity);
            }
            */


        }

        /**
         * 3D모델을 클릭했을 때 이벤트 발생
         */
        /*
        var handler = new Cesium.ScreenSpaceEventHandler(viewer.canvas);
        handler.setInputAction(function (click) {
            var pickedObject = viewer.scene.pick(click.position);
            if (Cesium.defined(pickedObject) && pickedObject.id) {
                var entity = pickedObject.id;
                alert(entity.name + '\n' + entity.description); // \n 을 사용하면 줄바꿈이 됩니다.
            }
        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
        */





    </script>

</body>
</html>